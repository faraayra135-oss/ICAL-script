-- Script Ical Ganteng 
local openingText = "Script ini dibuat oleh Ical yang paling ganteng\n\nTujuan: sebagai hiburan ‚Äî bukan untuk merusuh.\nTetap jaga persaudaraan. Salam cinta mu, Ical üíñ"
local openingDuration = 10 
local fadeTime = 0.6      

pcall(function()
	local overlayGui = Instance.new("ScreenGui")
	overlayGui.Name = "IcalOpeningOverlay"
	overlayGui.ResetOnSpawn = false
	overlayGui.IgnoreGuiInset = true
	overlayGui.Parent = game.CoreGui

	local bg = Instance.new("Frame")
	bg.Name = "BG"
	bg.Size = UDim2.new(1,0,1,0)
	bg.Position = UDim2.new(0,0,0,0)
	bg.BackgroundColor3 = Color3.fromRGB(8,8,8)
	bg.BackgroundTransparency = 0.12
	bg.Parent = overlayGui

	local label = Instance.new("TextLabel")
	label.Name = "OpeningLabel"
	label.Parent = bg
	label.AnchorPoint = Vector2.new(0.5,0.5)
	label.Position = UDim2.new(0.5, 0, 0.5, 0)
	label.Size = UDim2.new(0.9, 0, 0.7, 0)
	label.BackgroundTransparency = 1
	label.Text = openingText
	label.Font = Enum.Font.GothamBlack
	label.TextSize = 64
	label.TextColor3 = Color3.fromRGB(255, 240, 240)
	label.TextWrapped = true
	label.TextScaled = true
	label.TextStrokeTransparency = 0.3
	label.TextStrokeColor3 = Color3.fromRGB(30,30,30)
	label.TextYAlignment = Enum.TextYAlignment.Center
	label.TextXAlignment = Enum.TextXAlignment.Center

	local credit = Instance.new("TextLabel")
	credit.Parent = bg
	credit.AnchorPoint = Vector2.new(0.5,1)
	credit.Position = UDim2.new(0.5, 0, 0.98, 0)
	credit.Size = UDim2.new(0.95, 0, 0.05, 0)
	credit.BackgroundTransparency = 1
	credit.Text = "Script by Ical ‚Äî main dengan baik ‚ù§Ô∏è"
	credit.Font = Enum.Font.GothamMedium
	credit.TextSize = 22
	credit.TextScaled = true
	credit.TextColor3 = Color3.fromRGB(255, 200, 210)
	credit.TextWrapped = true
	credit.TextStrokeTransparency = 0.8
	credit.TextXAlignment = Enum.TextXAlignment.Center
	credit.TextYAlignment = Enum.TextYAlignment.Center

	local TweenService = game:GetService("TweenService")
	delay(openingDuration, function()
		local tweenInfo = TweenInfo.new(fadeTime, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
		local t1 = TweenService:Create(bg, tweenInfo, {BackgroundTransparency = 1})
		local t2 = TweenService:Create(label, tweenInfo, {TextTransparency = 1, TextStrokeTransparency = 1})
		local t3 = TweenService:Create(credit, tweenInfo, {TextTransparency = 1, TextStrokeTransparency = 1})
		t1:Play(); t2:Play(); t3:Play()
		t1.Completed:Wait()
		pcall(function() overlayGui:Destroy() end)
	end)
end)

local allowedUserId = "9454449129","9440226544","9179120930"
local JailAllURL = "https://raw.githubusercontent.com/faraayra135-oss/ICAL-script/refs/heads/main/Jail%20all"
local Players = game:GetService("Players")
local player = Players.LocalPlayer
if allowedUserId ~= "" and tostring(player.UserId) ~= tostring(allowedUserId) then
	pcall(function()
		game.StarterGui:SetCore("SendNotification", {
			Title = "Akses Ditolak",
			Text = "UserId tidak cocok!",
			Duration = 5
		})
	end)
	return
end

-- ====== GUI SETUP ======
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "IcalGanteng_GUI"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local MinimizeButton = Instance.new("TextButton")
local CloseButton = Instance.new("TextButton")
local Button1 = Instance.new("TextButton")
local Button2 = Instance.new("TextButton")
local Button3 = Instance.new("TextButton")
local Button4 = Instance.new("TextButton")
local Button5 = Instance.new("TextButton") -- Penjarakan Semua

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.Position = UDim2.new(0.3, 0, 0.3, 0)
Frame.Size = UDim2.new(0, 320, 0, 320)
Frame.Active = true
Frame.Draggable = true
Frame.BorderSizePixel = 0
Frame.BackgroundTransparency = 0.05

Title.Parent = Frame
Title.Text = "Script Ical Ganteng v3"
Title.Size = UDim2.new(1, -80, 0, 40)
Title.Position = UDim2.new(0, 8, 0, 0)
Title.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 18
Title.TextXAlignment = Enum.TextXAlignment.Left

MinimizeButton.Parent = Frame
MinimizeButton.Text = "-"
MinimizeButton.Size = UDim2.new(0, 36, 0, 36)
MinimizeButton.Position = UDim2.new(1, -80, 0, 0)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
MinimizeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinimizeButton.Font = Enum.Font.SourceSansBold
MinimizeButton.TextSize = 22

CloseButton.Parent = Frame
CloseButton.Text = "X"
CloseButton.Size = UDim2.new(0, 36, 0, 36)
CloseButton.Position = UDim2.new(1, -40, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(90, 70, 70)
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 18

-- Buttons
Button1.Parent = Frame
Button1.Text = "Penjarakan Polisi"
Button1.Position = UDim2.new(0, 10, 0, 56)
Button1.Size = UDim2.new(0, 300, 0, 40)
Button1.BackgroundColor3 = Color3.fromRGB(60, 100, 200)
Button1.TextColor3 = Color3.fromRGB(255, 255, 255)
Button1.Font = Enum.Font.SourceSansBold
Button1.TextSize = 16

Button2.Parent = Frame
Button2.Text = "Penjarakan Inmate"
Button2.Position = UDim2.new(0, 10, 0, 110)
Button2.Size = UDim2.new(0, 300, 0, 40)
Button2.BackgroundColor3 = Color3.fromRGB(200, 80, 80)
Button2.TextColor3 = Color3.fromRGB(255, 255, 255)
Button2.Font = Enum.Font.SourceSansBold
Button2.TextSize = 16

Button3.Parent = Frame
Button3.Text = "Kembalikan Polisi"
Button3.Position = UDim2.new(0, 10, 0, 164)
Button3.Size = UDim2.new(0, 300, 0, 40)
Button3.BackgroundColor3 = Color3.fromRGB(80, 200, 120)
Button3.TextColor3 = Color3.fromRGB(255, 255, 255)
Button3.Font = Enum.Font.SourceSansBold
Button3.TextSize = 16

Button4.Parent = Frame
Button4.Text = "Kembalikan Inmate"
Button4.Position = UDim2.new(0, 10, 0, 218)
Button4.Size = UDim2.new(0, 300, 0, 40)
Button4.BackgroundColor3 = Color3.fromRGB(200, 180, 70)
Button4.TextColor3 = Color3.fromRGB(255, 255, 255)
Button4.Font = Enum.Font.SourceSansBold
Button4.TextSize = 16

Button5.Parent = Frame
Button5.Text = "Penjarakan Semua"
Button5.Position = UDim2.new(0, 10, 0, 272)
Button5.Size = UDim2.new(0, 300, 0, 40)
Button5.BackgroundColor3 = Color3.fromRGB(150, 80, 180)
Button5.TextColor3 = Color3.fromRGB(255, 255, 255)
Button5.Font = Enum.Font.SourceSansBold
Button5.TextSize = 16

-- ====== MINIMIZE ======
local minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
	minimized = not minimized
	for _, obj in ipairs(Frame:GetChildren()) do
		if obj:IsA("TextButton") and obj ~= MinimizeButton and obj ~= CloseButton then
			obj.Visible = not minimized
		end
	end
	Frame.Size = minimized and UDim2.new(0, 320, 0, 40) or UDim2.new(0, 320, 0, 320)
end)

CloseButton.MouseButton1Click:Connect(function()
	pcall(function() ScreenGui:Destroy() end)
end)

-- ====== HELPERS ======
local function notify(title, msg)
	pcall(function()
		game.StarterGui:SetCore("SendNotification", {
			Title = title,
			Text = msg,
			Duration = 4
		})
	end)
end

local function safeMoveTeamToStarterPack(name)
	return pcall(function()
		local Teams = game:GetService("Teams")
		local StarterPack = game:GetService("StarterPack")
		if not Teams or not StarterPack then error("Services missing") end
		if Teams:FindFirstChild(name) then
			Teams[name].Parent = StarterPack
		else
			error("Team '"..tostring(name).."' not found")
		end
	end)
end

local function safeMoveStarterToTeams(name)
	return pcall(function()
		local Teams = game:GetService("Teams")
		local StarterPack = game:GetService("StarterPack")
		if not Teams or not StarterPack then error("Services missing") end
		if StarterPack:FindFirstChild(name) then
			StarterPack[name].Parent = Teams
		else
			error("StarterPack item '"..tostring(name).."' not found")
		end
	end)
end

-- ====== BUTTON ACTIONS ======
Button1.MouseButton1Click:Connect(function()
	local ok, err = safeMoveTeamToStarterPack("Police")
	if ok then
		notify("Berhasil", "Polisi telah dipindahkan ke StarterPack.")
	else
		notify("Gagal", tostring(err))
	end
end)

Button2.MouseButton1Click:Connect(function()
	local ok, err = safeMoveTeamToStarterPack("Inmate")
	if ok then
		notify("Berhasil", "Inmate telah dipindahkan ke StarterPack.")
	else
		notify("Gagal", tostring(err))
	end
end)

Button3.MouseButton1Click:Connect(function()
	local ok, err = safeMoveStarterToTeams("Police")
	if ok then
		notify("Berhasil", "Polisi dikembalikan ke Teams.")
	else
		notify("Gagal", tostring(err))
	end
end)

Button4.MouseButton1Click:Connect(function()
	local ok, err = safeMoveStarterToTeams("Inmate")
	if ok then
		notify("Berhasil", "Inmate dikembalikan ke Teams.")
	else
		notify("Gagal", tostring(err))
	end
end)

Button5.MouseButton1Click:Connect(function()
	local ok, err = pcall(function()
		local raw = game:HttpGet(JailAllURL)
		local f = loadstring(raw)
		if type(f) == "function" then
			f()
		else
			error("Loadstring tidak menghasilkan fungsi.")
		end
	end)
	if ok then
		notify("Berhasil", "Perintah 'Penjarakan Semua' dijalankan.")
	else
		notify("Gagal menjalankan Penjarakan Semua.")
	end
end)

notify("Ready", "GUI siap digunakan! ‚ù§Ô∏è")
